// Get the current filename from the event
var filePath = event.getPath();
var fileName = filePath.getName();

// Split the filename to get the base name and extension
var lastDotIndex = fileName.lastIndexOf(".");
var baseName = "";
var extension = "";

if (lastDotIndex > 0) {
    baseName = fileName.substring(0, lastDotIndex);
    extension = fileName.substring(lastDotIndex);
} else {
    baseName = fileName;
    extension = "";
}

// Create the new filename with "_processed" appended
var newFileName = baseName + "_processed" + extension;

// Create the full path for the new file
var directory = filePath.getParent();
var newFilePath = new java.io.File(directory, newFileName);

// Rename the file
var success = filePath.renameTo(newFilePath);

// Log the filename change
if (success) {
    logger.info("File renamed from " + fileName + " to " + newFileName);
} else {
    logger.error("Failed to rename file from " + fileName + " to " + newFileName);
}
